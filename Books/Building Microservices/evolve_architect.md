진화적 아키텍트
==============

'아키텍트'에 대한 부정확한 비교
-------------
    아키텍트라는 것이 실제 건축과 비교한다면 터무니 없음,
    컴퓨터가 만들어진지 100년도 채 되지 않았는데 몇 천년 동안 쌓아 올린 건축과 비교가 될 수 있는가?

> 다만, 표현할 길이 없어 건축의 아키텍터를 빌려온 것 뿐이다.
> 최선의 방안은 아키텍트의 의미를 재정의하는 것이다.

아키텍트에 대한 진화적 관점
-------------------------
    소프트웨어의 아키텍트 입장에서, 아키텍트를 하는 것은 에릭 도넌버그의 아이디어 도시 설계사와 같다.

    심시티 같은 게임처럼 주거 공간, 산업 공간, 에너지 저장소 등 여러 구역마다 특정한 목표를 가지고 건물을 짓고 도시의 시민들이 요구하는 것을 대응하는 것처럼.

> 소프트웨어 아키텍트도 마찬가지로 고객의 요구사항으로 진화하고, 모든 사태에 미리 예측하여 대응하는 것보다. 변화를 받아드리도록 하는것이다.

**아키텍처는 사용자 뿐만 아니라 개발자, 혹은 운영자 시스템을 변경하는 업무를 가지는 사람들도 수용해야만 한다.**

시스템이 현재 목적과 맞고 미래의 플랫폼으로써 적합하다는 것을 보장 및 사용자와 개발자가 똑같이 행복해지도록 하는 것은

**무리한 요구처럼 들린다.**

그래서 몇 가지 행동 방안 및 지켜야 할 원칙등이 있다.

구역화
----------

    아키텍트는 도시 설계의 좀 더 비유하면, 그의 구역은 어디일까?

서비스 경계 혹은 대단위 경계에 서 있을 것이다.

**아키텍트는 구역 내의 일보다는 구역 사이에서 발생하는 일을 더 걱정해야 한다.**

그래서, 아키텍트가 서비스 간 통신 방법에 대해 고민하거나 시스템의 전반적인 상태를 적절히 모니터링 하는 데 더 많은 시간을 할애하는 이유가
이용자들의 요구에 대해 분석 혹은 대처 할 수 있기 때문이다.

서비스별로 팀들이 다른 기술 스택 및 저장소를 사용해도, 마이크로서비스 특징 상 문제없다 할 수 있지만, 다른 우려 상황이 발생할 수 있다.

지원이 필요한 팀이 많은 기술 스택을 보유하고 있어서 팀원을 고용하고 이동시키는 일이 더 어렵다는 사실을 고려하면, 업무에 적합한 도구에 대한 선택권을 팀에 허용하자고 하면
그것들을 대규모로 운영하는데 충분한 경험이 부족해 관리및 대응에 대한 경험이 부족할 것이다.
> 다른 예를들어, 한 서비스는 HTTP 상에서 REST를 노출, 다른 서비스는 프로토콜 버퍼, 또 다른 서비스는 RMI를 사용하면 호출하는 서비스가 의사소통을 위한 다양한 스타일을 이해하고 통합하는 것은 악몽이 될 수 있다.

그래서 보통 사용하는 기술들을 처음부터 합의하에 결정한다. (넷플릭스는 데이터 저장 기술을 카산드라로 통일하여 작업한다.)

그래서 아키텍처는 구역 안에 있는 기술 보다는 구역 사이의 벌어지는 이벤트들을 걱정해야 한다.

원칙적인 접근법
----------------
    시스템의 설계상 결정은 트레이드오프와 관련된다.

> DB 를 선택할 때, 더 나은 확장 능력을 제공하는 플랫폼이 있다면 경험이 풍부하지 않더라도, 그것을 선택해야 하는가?
> 두 개의 서로 다른 기술 스택을 하나의 시스템에 사용해도 될까?
> 세 개를 사용하면 어떨까?

이와 같은 선택을 결정하는데 도움이 되는것은, **프레이밍** 이다.

[프레이밍, 문제의 표현 방식에 따라 동일한 사건이나 상황임에도, 선택이 달라질 수 있는 현상.](https://ko.wikipedia.org/wiki/%ED%94%84%EB%A0%88%EC%9D%B4%EB%B0%8D)

의사 결정을 프레이밍 할 수 있는 가장 좋은 방법은 성취해아 할 목표에 기반하여 일련의 원칙과 실천 사항을 정의 하는 것이다.

### 전략적 목표
    회사가 어디를 향해 나아가고 있는지, 고객을 행복하게 만드는 방법등을 전략적 목표라고 부른다.

### 원칙
    더 큰 목표를 하기 위해 할 일을 정렬하는 규칙으로, 변경할 수 있다.

예를들어, 서비스 출시 기간 단축이라면, 제품 출시 팀이 소프트웨어 수명 주기 전반에 대한 통제권 부여, 다른 팀과 다른 독립 출시 등 원칙을 정할 수 있다.

원칙은 겹치지 않고, 모순될 가능성을 배제 하기 위해 10개 미만인 것이 좋다.

[클라우드 플랫폼 헤로쿠의 12가지 요소](http://12factor.net) 이 요소를 다른 맥락에 적용해도 효과적이다.

### 실천 사항
    원칙을 실천할 수 있는 방법, 업무 수행을 위한 자세하고도 실질적인 지침.

> 실천사항은 기술 명세적이며, 구체적이여야 함.

#### 원칙과 실천 사항의 결합
    단일팀처럼 충분히 작은 그룹에서 원칙과 실천 사항을 결합하는 일은 문제가 되지 않는다.

> 그러나 큰 조직의 공통된 원칙을 지향하면서도 기술과 실천 사항이 서로 다를 수 있으며 장소에 따라 다른 요소가 필요할 수 있다.

필수 기준
---------
    실천 사항에 따라 작업하고, 결정할 트레이드오프에 대해 고민할 때 찾아내야 할 핵심 균형중 하나는
    시스템이 얼마나 많은 변동성을 허용할 수 있는가 하는 점이다.

서비스와 서비스간에 어떤 부분이 일정해야 하는지 식별하는 비결 중 하나는 바람직하게 동작하는 서비스의 모습을 정의 하는 것이다.

### 모니터링

    서비스 간 경계를 넘어 시스템 상태를 일관되게 살펴볼 수 있어야 한다.

모니터링으로 개별 서비스 상태를 아는 것도 유용하지만 때로는 광범위한 문제와 동향을 분석하고 이해해야 할 때가 있다.

모니터링 시스템은 어떤 것을 선택하더라도 표준을 유지해야한다.

### 인터페이스

    서비스 간 인터페이스 기술의 개수는 가능한 한 최소로 유지하는 편이 새로운 소비자를 통합하는 데 도움이 된다.

> HTTP/REST를 택한다면 명사형 혹은 동사형으로 사용할 것인지 등등..

### 아키텍처 안정성

    오작동 하는 하나의 서비스가 전체를 망가뜨리게 해서는 안 되며,
    서비스들이 비정상적인 하위 호출로 부터 보호해야 한다.

**응답 코드가 규약대로 동작하는 것 또한 중요하다.**

> 한 서비스가 에러에 대해 요청 성공을 뜻하는 2xx 코드를 보내거나, 4XX, 5XX 등 혼동한다면 안전 조치가 무너진 것이다.

코드를 통한 통제
----------------
### 본보기
    문서에서의 예제 혹은 틀은 중요하다, 코딩도 똑같듯이 권장하고 싶은 일련의 표준과 모범사례등의 본보기는 유용하다.

> 시스템의 더 나은 부분을 모방하는 것만으로도 사람들은 큰 실수를 예방할 수 있다.

이상적으로, 예제들은 가상의 서비스가 아닌 **실제 사용하는 서비스여야** 한다. 원칙의 타당성을 확신해야 하기 때문이다.

### 맞춤형 서비스 템플릿

기술 부채
----------

    


예외 처리
---------

거버넌스와 지휘
--------------

팀 만들기
--------