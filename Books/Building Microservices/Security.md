보안
======

    보안은, 위험에 대해서 방호하는 것 혹은 그와 같은 위험에 노출되지 않도록 하는 것을 말한다.
    고객들의 데이터 중심으로 돌아가는 서비스들의 보안은 더할 나위 없이 중요하다.

고객의 데이터야 말로 외부든 내부든 소중한 가치다 그러기 위해서는 보안에 대한 핵심부터 알아야 한다.

핵심을 알기전에, 나는 보안을 설명할 때 '집' 이라는 개념으로 비교를 한다. 앞으로도 집이라는 개념으로 설명을 지속적으로 하겠다.

인증, 권한 부여
---------------

    우리의 소중한 집은 멋진 장물로 가득차있다는 소식을 듣고 도둑들이 우리집을 호시탐탐 노린다고 가정해보자.
    적어도 우리의 대문은 나 그리고 내가 허락한 사람만 열 수 있도록 해야지 않겠는가?

인증은 자신이라고 말하는 당사자를 확인하는 핵심 과정이다. 사람에 대해서는 일반적으로 사용자 이름과 비밀번호를 통해 사용자를 인증한다.

물론 더 복잡한 과정이 있지만, 일반적으로 인증되는 사람 혹은 사물에 대해 추상적으로 이야기 할 때 **권한주체로** 언급된다.

### 권한부여

    권한주체가 있어도, 아무런 권한이 없다면 권한주체가 있던 없던 접근할 수 있는 범위는 같다.
    그래서 특정 서비스 혹은 필요한 서비스에 권한을 부여하는데 마이크로 서비스에서는 어떻게 권한을 분배하는가?

모놀리식 서비스 같은 경우에는 일반적으로 애플리케이션 혹은 프레임워크 상에서 인증과 권한 부여를 처리한다.

하지만 분산 시스템은 여러가지 서비스를 접근할 때 지속적으로 로그인하는 것을 원하지 않을 것이다.

그래서 진보된 전략이 필요하는데, 한 번의 인증으로 모든 시스템을 이용할 수 있는 SSO를 구현하는 것이다.

#### Single-Sign-On

    SSO(Single-Sign-On)은 한 계정으로 여러개의 서비스에 접근이 가능한 구현체 중 하나이다.

대표적으로 구글의 Oauth, 기타 OpenID 라는 개념이 존재하는데. 권한주체가 웹 기반 인터페이스를 통해 리소스를 접근하려고 할 때, 인증을 위해 **신원 제공자에** 재전송 된다.

그렇게 된다면 신원 제공자는 그 사람에게 사용자 이름과 비밀번호를 요구하거나 이중 요소 인증과 같은 더 진보된 것을 요구할 수 있다.

인증이 충족된다면 자원 접근 허용 여부를 결정하도록 **서비스 제공자에게** 정보를 전달한다.

그래서, 마이크로서비스에서 리소스를 얻기 위해서는 **인증을 통해 신원 제공자에게 정보를 전달하고 신원 정보자는 서비스 제공자에게 정보를 요청한다.**

#### Single-Sign-On Gateway

    위처럼, 신원 제공자를 경유하여 데이터를 얻기 때문에 많은 요청이 신원 제공자와 중복된 맺을 것이다.
    공유 라이브러리로 어느정도 해결할 수는 있지만, 이로인해 결합 문제가 생길 수 있으니. SSO 전용 서비스를 사용할 수 있는 게이트웨이를 만들면 된다!


##### 세분화된 권한 부여

게이트웨이는 상당히 효과적인 큰 단위의 인증 기능을 제공하는 것이 가능하다 그에따라 게이트웨이가 권한주체에 대한 속성을 추출할 수 있다고 가정하면 보다 섬세한 결정도 가능하다.

그래서 그룹별로 나누고, STAFF 처럼 특별한 역할을 가진 권한주체만 특정 리소스를 접근할 수 있도록 하는 것도 가능하지만.

팀의 일부 혹은 엔드포인트의 대한 접근 허용 여부는 마이크로서비스 자체에 맡겨야 한다.

어떤 행동의 허용 여부는 마이크로서비스가 더 많이 결정해야할 필요가 있다.



보관 중인 데이터를 보호하는 기법

유명한 암호 알고리즘을 사용해라

키가 전부인 것

암호화 대상 정하기

요구형 복호화

백업 암호화

심층 방어

1. 방화벽
2. 로그
3.  IDS, IPS 구현
4. 망 분리
5. 운영 체제

필요어ㅗㅄ는 고객의 데이터를 저장하면, ㅎ무쳐각것도 없고, 굳이 저장할 필요가 없다.

데이터 최소화는 절대저긍로 요구되는 만큼의 정보만 저장하는 개념을 함추갛고 있음.

인적 요소
사회 공학 해킹의 관련된 이야기, 사람들에게 보안 윤리 의식을 심어주어야 한다.
ㅎ
보안 탑재 이야기 나옴

외부 검증
- 모의 해킹 이야기.


