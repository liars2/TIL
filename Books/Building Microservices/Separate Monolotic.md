모노리식 서비스 분리하기
=========================

    모놀로식은 마이크로서비스와 달리 강한 결합성, 낮은 응집력을 가지고 있는건 잘 알고 있다.
    근데, 왜? 꼭 모놀리식을 마이크로서비스로 바꿔야 하는가?

모놀리식 서비스를 마이크로서비스로 바꾸었을 때의 장점
-----------------------------------------------------

1. 변경의 속도
    - 배포하는데 속도 제한이 걸리지 않는다.
2. 팀 분활
    - 한가지 모놀리식 서비스의 개발이 아닌 마이크로서비스 단위로 개발을 할 수 있다.
3. 기술의 이기종성
    - 한가지 언어로 구현되있는게 아닌 서비스에 맞는 언어를 선택해서 구현할 수 있다! (서비스 지향 아키텍쳐)
4. DB 분리
    - 이후 밑에서 다룰 예정이다.
5. 보안
    - 각 각의 서비스 마다 접근 할 수 있는 리소스가 다르니, 보안적 측면에서도 좋다.
6. 의존성
    - 코드에서 뒤엉킨 의존성풀어

> 사용하고 있는 비지니스에 위 장점들이 **필요하다고 판단한다면,** 마이크로서비스로 바꾸는것이 더 효율적이다.

모놀리식 서비스의 접합부
---------------------------

보통 접합부라고 생각을 한다면 코드베이스에서 각각의 서비스를 잇는 부분이라고 생각할 수 있는데

모놀리식 서비스의 접합부는 이 접합부를 지워도 나머지 모놀리식 서비스에서는 영향이 없는 부분이다.

> 그럼 가장 좋은 접합부를 추상적인 개념으로 묶는다면 어떤 기준이 좋을까?

앞서 배운 BC(Bounded Context)가 좋은 접합부라고 볼 수 있다. 아예 경계선으로 나눈 도메인들의 집합이니까.

공예
---------

모놀리식은 대리석 공예로 비교해도 손색없을 정도로 공예를 하면서 지켜야 할 원칙들이 비슷하다

목적을 비유해보면 이와 같이 성립할 수 있다.

> 큰 대리석(모놀리식)을 깍아서(분리) 조각상(마이크로서비스)로 만드는 것이니까.

또 이런 원칙도 같다.

> 한 번에 모든것을 깍으려고 하지 않고 (Big Bang 접근법)
> 머리, 몸통, 다리 한 부위마다 (DB Schema, Packaging..)
> 하나씩 차근 차근 (CodeBase 수정 -> DB Separate..)

모놀리식 분리순서
=====================

    큰 단위로 나누자면, 코드베이스와 데이터베이스로 분리 순서가 나뉘어 진다.
    그러면, 이제 코드베이스로 넘어가서 직접 분리를 해보자.

코드베이스
----------



콘텍스트 대표하는 패키지 구성

대표 패키지로 기존 코드 이동
(접합부를 기준으로 변경)

이동 도중에 발생하는 의존성을 분석 후 대응

데이터베이스
----------

데이터베이스에 읽고 쓰는 코드 부분을 나눔

객체 혹은 데이터 구조를 매핑하기 쉽게 분활 분할

데이터베이스 리팩토링

데이터베이스 분활로 인한 트랜젝션의 보장


객체 혹은 데이터 ~~~
여기서 발생하는 문제점
1. 외부 키 관계

2. 공유 정적 데이터

3. 공유 데이터

4. 공유 테이블