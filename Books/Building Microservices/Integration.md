통합
======

앞서 말한, 느슨한 결합 그리고 강한 응집력을 얻기 위하여 서비스 분류를 한 이유는 통합을 위해서 라고 말할 수 있다.

그러면, 서비스와 서비스 끼리의 결합은 어떤 방식으로 할 수 있을까?

선택권의 자율성
---------------------------------------

### 서버가 바뀌어도 클라이언트가 바뀌면 안된다.
    마이너 업그레이드로 데이터 일부분에 몇 가지 새로운 것을 추가하고 노출하여도 기존 서비스에 영향을 미치지 않아야 한다.

### API는 모든 기술에 일정해야한다
    기술의 발전으로 당장 카카오톡이나 일부 서비스만 봐도 변화가 있다는 것을 볼 수 있다.
    상당히 짧은 시간에 많은 변화가 일어나고 있는데, 다음날에 우리가 사용한다는 기술을 계속 사용한다고 보장할 수 있을까?

> 마이크로서비스의 모든 API 통신은 특정 기술만 사용해야한다 라는 고집이 없다.

**이는 마이크로서비스가 기술 스택을 좌우하는 기술 지향 아키텍쳐가 아니라는 것도 증명한다.**

### TO KISS (KEEP IT SIMPLE STUPID) CUSTOMER!

    마트가 미로같고 아무런 정보 없이 물건들을 내세우면 그 마트는 어떻게 되겠는가? 망하는게 당연하다!
    우리의 서비스가 난잡하고 수고를 들어야 한다면 그 서비스는 성공하겠는가?

그러면 어떻게 쉽게 사용할 수 있을까?

클라이언트 라이브러리를 제공하는 것이 손쉬운 대안이지만, 늘어난 결합의 비용을 초래한다.

### 굳이 다 보여줄 필요는 없다

    내부까지 보여준다면, 그 서비스의 내부까지 종속되게 만들 것이며,
    결국에는 우리가 그토록 신경쓴 결합도도 높아지게 된다.

그래서, 소비자 업그레이드가 두려워서 변경을 꺼리게 되며, 기술 부채 증가를 가져온다.

### 공유 데이터 베이스
    일반적인 통합 형태는 DB 통합이다.
    어떤 서비스가 어떤 데이터를 원하면 직접 접근하여야 한다, 정보를 변경하고자 할때도 마찬가지다.
<img src="../Image/Using DB Integration to access and change customer information.PNG">

1. 외부에서 내부의 구현 상세를 조회하고 결합하는 것을 용한다.
2. 소비자들이 특정 기술을 선택하는 범위가 제한된다.
3. 고객 정보가 변경되는 방식과 관련한 로직이 어딘가에 있을까? 만약 소비자가 DB를 직접 조작한다면 소비자는 로직을 소유해야하고 -> 응집력 빠빠이

강한 응집력과 느슨한 결합력이 바로 그것이지만, 이건 다 잃어용

내부 표현과 감추며 협업하는 서비스들의 연관된 통합 방식은 뭐지?

### 오케스트레이션과 코레오그래피

#### 오케스트레이션
    오케스트라 지위자 처럼 프로세스를 안내하는 것 같아서 오케스트레이션이라고 불린다.

오케스트레이션 뇌 처럼 작동하는 형식이다.
배고프다 -> 냉장고를 열어본다 -> 과일을 발견한다 -> 과일을 먹는다.

#### 코레오그래피
    발레 무용수들이 자신의 역활을 알고 주변의 다른 무용수에 반응하는 것처럼 해서 코레오그래피라고 불린다.

코레오그래피는 비동식으로 이벤트를 발생할 뿐이다.
다른 서비스들이 그것을 지켜보고, 이벤트가 발생하면 그것에 발맞춰 대응하는 형태다.

하지만, 이 뜻은 모니터링 시스템이 필요하다는 것을 의미하곤 하다.

RPC
----

    원격 프로시저호출(RPC)는 지역 호출을 통해 원격 서버스를 실행하는 기술이다.

### 지역 호출은 원격 호출과 다르다

RPC 아이디어의 핵심은 원격 호출