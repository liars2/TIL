서비스 모델링하기
================

무엇이 좋은 서비스를 만드는가?
------------------------------

    서비스를 만들 때, 주요 집중해야 할 두 가지 개념이 존재한다.

### 느슨한 결합

    한 서비스를 추가 및 수정하더라도, 다른 서비스는 건드리지 말아야 한다.

빡빡하게 서비스가 결합되면, 서비스를 추가 및 수정한다면 해당 서비스만 바꾸는 것이 아닌 결합된 서비스 까지 보고 수정해야 할 것이다.

### 강한 응집력

    연관된 행위는 모아두고, 그렇지 않은것은 다른 곳에 두고 싶어한다.

만약 서로 다른 서비스들로 구성되어 있다면, 해당 서비스를 수정 해야 할 때 일치하는 부분도 수정해야 하고 결국 많은 서비스를 다시 배포해야만 한다.

경계가 있는 콘텍스트
--------------------
    특별한 규칙, 성질 등으로 세워진 경계로 구성된 콘텍스트들을 칭한다.

각 콘텍스트들은 외부와 통신할 필요가 없는 것 뿐, 경계가 있는 다른 콘텍스트 외부와 공유되는 모델이 존재.

#### 명료한 경계에 의해 구체적인 책임

    각 콘텍스트는 정해진 책임에 따라 서비스를 운영하며, 어떤 콘텍스트가 만약 자기 콘텍스트에 맞지 않는 행동들을 한다면
    그것은 그 일을 하는 책임자(다른 컨텍스트)를 무시하는 것이다.

### 감춰진 공유 모델

    각 콘텍스트들에게 알려주는 명시적인 인터페이스와 알려줄 필요 없는 숨겨진 모델들도 존재한다.

어떤 모델을 사용하려고 하면 그 모델을 이용해 명료한 콘텍스트 결계와 의사소통 해야한다.

### 모듈과 서비스

    어떤 모듈과 결합해야 할지, 안되는지 고려하여 강한 결합을 피해야 한다.
    또한 서로 조화를 이루는 비지니스 역량들이 존재하는 도메인 내부의 경계를 식별하며 높은 응집력을 제공한다.

### 성급한 분해
    성급한 마이크로서비스화는, 구체적이고 명시적이지 않는 형태로 사용을 해
    결국 다시 모놀리식 서비스 교체 되는 경우가 있다.

> 기존 코드베이스를 마이크로서비스로 분해하는 것이 처음부터 마이크로서비스로 가는 것보다 훨씬 쉽다.

비지니스 능력
--------------
    조직 내에 존재하는 경계가 있는 콘텍스트에 관해 고민할 때는 공유 데이터 관점이 아닌 콘텍스트의 능력 관점에서 봐야한다.

**이들 능력이 서비스로 모델링될 때 그것은 네트워크를 통해 다른 협업자에 노출될 주요 행위가 된다.**

거북이 밑에 거북이
-------------------
    큰 단위의 제한된 콘텍스트는 더 많은 경계가 있는 콘텍스트들을 내포할 수 있다.

마이크로서비스의 경계를 고려할 때는 우선 더 넓고 큰 단위의 콘텍스트 관점에서 생각한 뒤
**접합부의 분리를 통한 혜택을 발견했을 때 내포된 콘텍스트에 따라 세분화하라.**

### 내포 방식

    만약 경계로 묶은 모델들이, 한 곳이 아닌 각기 다른 곳에서 사용한다면.
    그것들은 최상위 계층의 마이크로서비스가 될 자격이 있다.

> 내포 방식을 선호하는 다른 이유는, 테스팅의 단순화가 가능하다.

비즈니스 콘셉트 관섬에서의 커뮤니케이션
----------------------------------------

    시스템에 구현하는 변경사항은 종종 시스템 동작 방식 변경 -> 고객에게 노출되는 기능을 변경하는 것.
    도메인을 대표하는 경계가 있는 콘텍스트들에게 따라 우리 시스템이 분해된다면
    그 변경사항은 단일 마이크로서비스 경계로 격리되기 쉽다.

> 그러면 변경 대상을 줄이고 신속한 배포가 가능하다.

기술적 경계
----------

    서비스가 부정확하게 모델링되었을 때 어떻게 잘못되는지 지켜보는 것은 유용하다.

> 이전의 모놀리식 시스템을 지리적, 조직적 라인에 따라 분리한다는 아이디어는 표면적으로는 완벽하지만.

기술 접합부에 따라 서비스 경계를 모델링하는 결정이 항상 잘못된 것은 아니다.
