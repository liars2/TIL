Basic Authentication
==================
    웹을 통해 개인적인 업무 혹은 데이터에 접근해야 하려면
    서버가 사용자가 누구인지 식별할 수 있어야 한다.

> 서버가 사용자가 누구인지 알면,<br>그 사용자가 어떤 작업이나 리소스에 접근할 수 있는지 결정 할 수 있다.

인증
-----------
    인증은 당신이 누구인지 증명하는 것이다.
    EX) 여권이나 신분증 같은 것을 보여주는 것은, 당신이 누구인지 증명해 보이는 것이다.

### HTTP의 인증요구 / 응답 프레임워크

<img src="../Image/simply_describe_ahthentication_request_response.png">
Client가 Sever에게 private 정보를 달라고 했을 때 일어나는 통신과정

1. Client 가 판매 예측 정보를 보내달라고 요청한다.
2. Server는 비밀 재정 문서를 요청했다 라는 메세지와 함께, 유저이름과 비밀번호를 요청한다.
3. Server에게 유저 이름과 비밀번호를 전송한다.
4. 서버는 그 정보를 받고 Client에게 판매 예측 정보를 보낸다.

    웹 애플리케이션이 HTTP 요청 메시지를 받으면,
    요청을 처리하는 대신에 현재 사용자가 누구인지를 알 수 있게
    비밀번호와 같이 개인 정보를 요구하는 '인증 요구'로 응답할 수 있다.

### 인증 프로토콜과 헤더

    HTTP는 필요에 따라 고쳐 쓸 수 있는 제어 헤더를 통해, 다른 인증
    프로토콜에 맞추어 확장할 수 있는 프레임워크를 제공한다.

| 단계     | 헤더                | 설명                                                                                                                                | 메서드/ 상태         |
|----------|---------------------|-------------------------------------------------------------------------------------------------------------------------------------|----------------------|
| 요청     |                     | 첫 번째 요청에는 인증 정보가 X                                                                                                      | GET                  |
| 인증요구 | WWW-Authenticate    | 서버는 계정 정보를 제공하라는 의미로 401 코드와 반려한다.<br> 서버에는 각각 다른 비밀번호가 있는 영역이 있을 것으로, 영역 설명 포함 | 401<br> Unauthorized |
| 인증     | Authorization       | 클라이언트는 요청을 다시 보내는데, 이번에는 인증 알고리즘과<br> 사용자 이름과 비밀번호를 기술한 Authorization 헤더를 함께 보낸다.   | GET                  |
| 성공     | Authentication-Info | 인증 정보가 정확하면, 서버는 문서와 함께 응답한다.<br>                                                                              | 200 OK               |

### 보안 영역
    HTTP가 각 리소스마다 다른 접근 조건을 다룰 수 있는 것은
    웹 서버는 보안 영역(realm) 그룹으로 나눈다.
> 보안 영역은 저마다 다른 사용자 권한을 유지한다.

기본 인증
----------
    기본 인증은 가장 잘 알려진 HTTP 인증 규약이다.
    거의 모든 주요 클라이언트와 서버에 기본 인증이 구현되어 있다.
> WWW-Authenticate 에 기술해서 응답하여 인증요구를 시작한다.

### 기본 인증의 예

<img src="../Image/Basic_authentication_example.png">

    Family 영역에 관한 사용자 이름과 비밀번호를 요구하는 대화상자를 띄운다.
    사용자 정보를 입력하면, 브라우저는 그것들을 콜론으로 이어 붙이고
    BASE-64 방식으로 인코딩 한 뒤, Authorization 헤더에 그 값을 담아 서버로 다시 보낸다.

**HTTP 기본 인증의 WWW-Authenticate 헤더와 Authorization 헤더는 표 12-2에서 설명한다.**

| 인증요구/응답                   | 헤더 문법과 설명                                                                                                                                    |
|---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------|
| 인증요구<br> (Server to Client) | realm은 문서 집합의 이름을 따옴표로 감싼 것을 보고<br> 어떤 비밀번호를 사용해야 하는지 알 수 있다. WWW-Authenticate: Basic realm=따옴표로 감싼 정보 |
| 응답<br> (Client to Server)     | user id, pw는 콜론으로 잇고, Base-64로 인코딩 후 전송                                                                                               |

### 프락시 인증
    중개 프락시 서버를 통해 인증할 수도 있다.
    프락시 서버에서 접근 정책을 중앙 관리 할 수 있기 떄문에
> 회사 리소스 전체에 대해 통합적인 접근 제어를 하기 위해서 프락시 서버를 사용하면 좋다.

프락시 인증은 웹 서버의 인증과 헤더와 상태 코드만 다르고 절차는 같다.

##### 웹 인증과 프락시 인증의 대조
| Web server                    | Proxy server                  |
|-------------------------------|-------------------------------|
| Unauthorized status code: 401 | Unauthorized status code: 407 |
| WWW-Authenticate              | Proxy-Authenticate            |
| Authorization                 | Proxy-Authorization           |
| Authentication-Info           | Proxy-Authentication-Info     |

기본 인증의 보안 결함
----------------------
1. 기본인증은 사용자 이름과 비밀번호를 쉽게 디코딩할 수 있는 형식으로 네트워크에 전송한다.<br>
    **base-64로 인코딩된 정보는 사실상 '비밀번호 그대로' 보내는 것과 다름없다.**
2. 보안 비밀번호가 디코딩하기에 더 복잡한 방식으로 인코딩하여 전송한다.
    **여전히 제 3자는 그것을 캡처한 다음 원 서버에 보내서 인증에 성공하고 서버에 접근할 수 있다.**
3. 심지어 기본 인증이 회사의 인트라넷 접근 제어 같은 보안이 뚫리더라도 치명적이지 않은 애플리케이션이 사용된다 하더라도.
    **일반 사용자들이 웹 사이트들을 사용하는 행태에 비추어 이것은 굉장히 위험한 것이 된다.**
4. 메시지의 인증 헤더를 건드리지는 않지만, 그 외 다른 부분을 수정하여
    **프락시나 중개자가 중간에 개입하는 경우, 기본 인증은 정상적인 동작을 보장하지 않는다.**
5. 기본 인증은 가짜 서버의 위장에 취약하다.

결론
----

    종합해보면, 기본 인증은 일반적인 환경에서 개인화나 접근을 제어하는데 편리하며
    보기 원치 않지만, 보더라도 치명적이지 않는 경우에는 여전히 유용하다.
